---
title: Match Configuration Object Structure
sidebar: rdp_sidebar
permalink: api_match_object_structure.html
folder: rdp
type: HowToAPI
---

{% include snippets/api_preview.md %}

A match configuration object is a JSON structure that provide details about the match configurations such as type, attributes to match on for deterministic match, and thresholds for a Machine-Learning (ML) based match.

{% include callout.html content="**Notes**: 
* It is not mandatory to specify both deterministic and probabilistic match rules. Based on the requirement, you can specify either one of them.
* The match configuration information is a flush and fill process. This implies that if you wish to update a configuration, then you still use the create API to flush and fill the configuration data.
" type="primary" %}

This topic describes the match configuration object structure using a sample scenario.

## Scenario

Consider you wish to create a **deterministic** match for "vendoruniqueid" attribute and if no match results are found, you wish to perform a **ML based match**. The following example demonstrates the sample JSON format to create a configuration for matching:

<pre><code>
{% raw %}
POST **{{site.data.rdp_glossary.createconfig}}**
Headers: Content-Type: application/json
Body:
{
  "configObjects": [
    {
      "id": "customer_matchConfig",
      "name": "customer",
      "type": "matchConfig",
      "properties": {
        "createdService": "configurationManageService",
        "createdBy": "mary.jane@riversand.com",
        "createdDate": "2019-03-11T23:09:16.614-0500",
        "modifiedService": "configurationManageService",
        "modifiedBy": "mary.jane@riversand.com",
        "modifiedDate": "2019-03-11T23:09:16.614-0500"
      },
      "data": {
        "jsonData": {
          "type": "config",
          "matchRules": [
            {
              "matchType": "deterministic",
              "matchSequence": 1,
              "searchQuery": {
                "query": {
                  "valueContexts": [
                    {
                      "source": "internal",
                      "locale": "en-US"
                    }
                  ],
                  "filters": {
                    "typesCriterion": [
                      "customer"
                    ],
                    "attributesCriterion": [
                      {
                        "vendoruniqueid": {
                          "exact": "{{vendoruniqueid}}",
                          "type": "_STRING"
                        }
                      }
                    ]
                  }
                }
              }
            },
            {
              "matchType": "probabilistic",
              "matchThresholds": {
                "mergeThreshold": 95,
                "createThreshold": 75
              }
            }
          ]
        }
      }
    }
  ]
}
{% endraw %}
</code></pre> 

## configObject 

This object is the parent container holding all the required information about the configuration object. The following table lists the details of the configuration object:

| Property | Description | Type | Required |
|----------|-------------|------|----------|
| id | Indicates the unique identifier of the configuration. ID is alpha-numeric with a maximum length of 128 characters. If it is not provided, then id is generated by the platform. ID can contain underscore(_). For easy understanding, you can define id as <<entityType>>_matchConfig| String | Yes |
| name | Indicates the name of the configuration. Name can contain underscore(_), spaces, and alpha-numeric with a maximum length of 256 characters. Name can be duplicate. | String | Yes |
| type | Indicates the configuration type. The supported type is "matchConfig". | String | Yes |
| data | Indicates the details about deterministic and probabilistic match. |[data](#data) | Yes |

## data

The following table lists the details of the data object:

| Property | Description | Type | 
|----------|-------------|------|
| matchRules | Indicates an array of rules for each match type (deterministic and ML) you wish to define. | [matchRules (determistic)](#matchrules-determistic) and [matchRules (ML)](#matchrules-probabilistic)  |

## matchRules (determistic)

This is an exact match, where you can use predefined operators to perform match. Typically, used for the unique identifiers such as Vendor Identifier, Product Identifier. You must specify the following matchRules properties for determistic match:

| Property | Description | Type | Required |
|----------|-------------|------|----------|
| matchType | Indicates the type of match. Specify "deterministic". | String | Yes |
| matchSequence | Indicates the sequence to be followed during matching. | Integer | Yes |
| searchQuery | Indicates the criteria used for deterministic match. | [searchQuery (deterministic)](#searchquery-deterministic) | Yes |

Example: Consider you wish to create a "deterministic" match for "vendoruniqueid" attribute for customer entity types. Then create a match configuration with matchType as 'deterministic' and 'matchSequence' as '1'. Match Service tries to find a match with the 'attributesCriterion' -> 'vendoruniqueid'.

Data for sample [Scenario](#scenario): Set the following properties:

| Property | Value | 
|----------|-------------|
| matchType | deterministic |
| matchSequence | 1 |

## searchQuery (deterministic)

This object contains the query based on which match is performed and results are returned.

| Parameters | Name | Required | Description |
|-------|--------|----------------|-------------|
| query | valueContexts  | Yes | Indicates an array of source and locale. |
| query | valueContexts -> source  | Yes | Indicates the source of the entity. |
| query | valueContexts -> locale  | Yes | Indicates the locale of the entity. |
| query | filters -> typesCriterion | Yes | Indicates a comma separated list of entity types. |
| query | filters -> attributesCriterion | Yes | Indicates an array of attribute names and values that are used to find duplicates for the supported matches. |
| query | filters -> attributesCriterion -> <<AttrName>> | Yes | Indicates the name of the attribute. If you specify multiple attributesCriterion, then Match Service performs an "and" search for all the attributes to find duplicates. Supported attribute data types for matching are - string, integer, date, datetime, and decimal. Possible values - "eq" (equal to), "gte" (greater than or equal to), "lte" (less than or equal to), and exact. |
| query | filters -> attributesCriterion -> <<AttrName>> -> <<Operator>> : <<AttrValue>> | Yes | Indicates the type of operator to be used for comparing the AttrValue. |

Data for sample [Scenario](#scenario): Set the following properties:

| Property | Value | 
|----------|-------------|
| valueContexts -> source | internal |
| valueContexts -> locale | en-US |
| filters -> typesCriterion | customer |
| filters -> attributesCriterion -> <<AttrName>> -> <<Operator>> : <<AttrValue>> | filters -> attributesCriterion -> "vendoruniqueid" -> "exact": "\{\{vendoruniqueid\}\}" |

## matchRules (ML)

This is a near perfect match performed when Deterministic match fails. It contains the probability threshold to indicate when an entity must be created and when it must be merged. Typically, used for the attributes such as Vendor Name, Vendor Address. Internally, Riversand Platform uses **Match Training Engine** to perform ML based match. It uses the **ML based Match Configuration** to perform match. See [Configure Machine-Learning (ML) Match](/{{site.data.rdp_links_version.APP}}/rdp_feature_match_configure_ml.html), for more information. See [Tune Match Training Engine](/{{site.data.rdp_links_version.APP}}/rdp_feature_match_training_engine.html), for more information on Match Training Engine.

You must specify the following matchRules properties for ML based match:

| Property | Description | Type | Required |
|----------|-------------|------|----------|
| matchType | Indicates the type of match. Specify "probabilistic". | String | Yes |
| matchThresholds -> mergeThreshold | Indicates the match score threshold for merging an entity. During matching, if the match score between the source and target entity is greater than mergeThreshold value, then an entity is automatically merged. If the match score is in-between create and merge threshold, then entity goes through a match review process. You must setup required authorization as required for merge. See [Configure Authorization for Match](/{{site.data.rdp_links_version.APP}}/rdp_feature_match_auth.html). | integer | Yes |
| matchThresholds -> createThreshold | Indicates the match score threshold for creating an entity. During matching, if the match score between the source and target entity is less than createThreshold value, then an entity is created. | integer | Yes |

Data for sample [Scenario](#scenario): Set the following properties:

| Property | Value | 
|----------|-------------|
| matchType | probabilistic |
| matchThresholds -> mergeThreshold  | 95 |
| matchThresholds -> createThreshold  | 75 |